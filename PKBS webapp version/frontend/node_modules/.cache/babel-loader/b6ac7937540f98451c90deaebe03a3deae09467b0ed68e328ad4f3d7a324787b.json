{"ast":null,"code":"const API_BASE=process.env.REACT_APP_API_BASE_URL||'http://localhost:4000/api';// Login function: expects { username, password }\nexport async function login(credentials){try{const response=await fetch(`${API_BASE}/auth/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(credentials)});if(!response.ok){const errorData=await response.json().catch(()=>({}));throw new Error(errorData.message||'Login failed');}const data=await response.json();localStorage.setItem('token',data.token);localStorage.setItem('user',JSON.stringify(data.user));return data.user;}catch(error){console.error('Login error:',error.message);throw error;}}// Logout: clear tokens and user data\nexport function logout(){localStorage.removeItem('token');localStorage.removeItem('user');}// Get stored auth token\nexport function getToken(){return localStorage.getItem('token');}// Get stored user info\nexport function getUser(){const user=localStorage.getItem('user');return user?JSON.parse(user):null;}// Check if logged in\nexport function isLoggedIn(){return Boolean(getToken());}","map":{"version":3,"names":["API_BASE","process","env","REACT_APP_API_BASE_URL","login","credentials","response","fetch","method","headers","body","JSON","stringify","ok","errorData","json","catch","Error","message","data","localStorage","setItem","token","user","error","console","logout","removeItem","getToken","getItem","getUser","parse","isLoggedIn","Boolean"],"sources":["/workspaces/PKBS-Manager/PKBS webapp version/frontend/src/services/auth.js"],"sourcesContent":["const API_BASE = process.env.REACT_APP_API_BASE_URL || 'http://localhost:4000/api';\r\n\r\n// Login function: expects { username, password }\r\nexport async function login(credentials) {\r\n  try {\r\n    const response = await fetch(`${API_BASE}/auth/login`, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(credentials),\r\n    });\r\n    if (!response.ok) {\r\n      const errorData = await response.json().catch(() => ({}));\r\n      throw new Error(errorData.message || 'Login failed');\r\n    }\r\n    const data = await response.json();\r\n    localStorage.setItem('token', data.token);\r\n    localStorage.setItem('user', JSON.stringify(data.user));\r\n    return data.user;\r\n  } catch (error) {\r\n    console.error('Login error:', error.message);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Logout: clear tokens and user data\r\nexport function logout() {\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('user');\r\n}\r\n\r\n// Get stored auth token\r\nexport function getToken() {\r\n  return localStorage.getItem('token');\r\n}\r\n\r\n// Get stored user info\r\nexport function getUser() {\r\n  const user = localStorage.getItem('user');\r\n  return user ? JSON.parse(user) : null;\r\n}\r\n\r\n// Check if logged in\r\nexport function isLoggedIn() {\r\n  return Boolean(getToken());\r\n}\r\n"],"mappings":"AAAA,KAAM,CAAAA,QAAQ,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAI,2BAA2B,CAElF;AACA,MAAO,eAAe,CAAAC,KAAKA,CAACC,WAAW,CAAE,CACvC,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGP,QAAQ,aAAa,CAAE,CACrDQ,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAAC,CAC/CC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,WAAW,CAClC,CAAC,CAAC,CACF,GAAI,CAACC,QAAQ,CAACO,EAAE,CAAE,CAChB,KAAM,CAAAC,SAAS,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,KAAO,CAAC,CAAC,CAAC,CAAC,CACzD,KAAM,IAAI,CAAAC,KAAK,CAACH,SAAS,CAACI,OAAO,EAAI,cAAc,CAAC,CACtD,CACA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAb,QAAQ,CAACS,IAAI,CAAC,CAAC,CAClCK,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEF,IAAI,CAACG,KAAK,CAAC,CACzCF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEV,IAAI,CAACC,SAAS,CAACO,IAAI,CAACI,IAAI,CAAC,CAAC,CACvD,MAAO,CAAAJ,IAAI,CAACI,IAAI,CAClB,CAAE,MAAOC,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,cAAc,CAAEA,KAAK,CAACN,OAAO,CAAC,CAC5C,KAAM,CAAAM,KAAK,CACb,CACF,CAEA;AACA,MAAO,SAAS,CAAAE,MAAMA,CAAA,CAAG,CACvBN,YAAY,CAACO,UAAU,CAAC,OAAO,CAAC,CAChCP,YAAY,CAACO,UAAU,CAAC,MAAM,CAAC,CACjC,CAEA;AACA,MAAO,SAAS,CAAAC,QAAQA,CAAA,CAAG,CACzB,MAAO,CAAAR,YAAY,CAACS,OAAO,CAAC,OAAO,CAAC,CACtC,CAEA;AACA,MAAO,SAAS,CAAAC,OAAOA,CAAA,CAAG,CACxB,KAAM,CAAAP,IAAI,CAAGH,YAAY,CAACS,OAAO,CAAC,MAAM,CAAC,CACzC,MAAO,CAAAN,IAAI,CAAGZ,IAAI,CAACoB,KAAK,CAACR,IAAI,CAAC,CAAG,IAAI,CACvC,CAEA;AACA,MAAO,SAAS,CAAAS,UAAUA,CAAA,CAAG,CAC3B,MAAO,CAAAC,OAAO,CAACL,QAAQ,CAAC,CAAC,CAAC,CAC5B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}