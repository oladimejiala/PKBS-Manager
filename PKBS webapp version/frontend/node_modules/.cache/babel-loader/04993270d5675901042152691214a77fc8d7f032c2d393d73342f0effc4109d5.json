{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useSelector,useDispatch}from'react-redux';import{fetchUserTransactions}from'../services/api';import{useNavigate}from'react-router-dom';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Dashboard=()=>{const dispatch=useDispatch();const navigate=useNavigate();const user=useSelector(state=>state.auth.user);const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{const loadTransactions=async()=>{try{const data=await dispatch(fetchUserTransactions(user.id));setTransactions(data);}catch(error){console.error('Failed to fetch transactions:',error);}finally{setLoading(false);}};if(user!==null&&user!==void 0&&user.id)loadTransactions();},[dispatch,user]);// Calculate simple stats\nconst totalTransactions=transactions.length;const totalSourcing=transactions.filter(t=>t.type==='sourcing').length;const totalSales=transactions.filter(t=>t.type==='sale').length;return/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-page\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome back, \",(user===null||user===void 0?void 0:user.name)||'User',\"!\"]}),/*#__PURE__*/_jsxs(\"section\",{className:\"dashboard-stats\",style:{display:'flex',gap:'2rem',marginBottom:'2rem'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",style:statCardStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Transactions\"}),/*#__PURE__*/_jsx(\"p\",{children:loading?'Loading...':totalTransactions})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",style:statCardStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sourcing Transactions\"}),/*#__PURE__*/_jsx(\"p\",{children:loading?'Loading...':totalSourcing})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card\",style:statCardStyle,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sales Transactions\"}),/*#__PURE__*/_jsx(\"p\",{children:loading?'Loading...':totalSales})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"recent-transactions\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Recent Transactions\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading transactions...\"}):transactions.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No transactions found.\"}):/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Quantity (kg)\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Price (\\u20A6)\"}),/*#__PURE__*/_jsx(\"th\",{style:thStyle,children:\"Status\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions.slice(0,5).map(tx=>{var _tx$quantity;return/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:'1px solid #ddd'},children:[/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:new Date(tx.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:tx.type}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:(_tx$quantity=tx.quantity)!==null&&_tx$quantity!==void 0?_tx$quantity:'-'}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:tx.price?tx.price.toLocaleString():'-'}),/*#__PURE__*/_jsx(\"td\",{style:tdStyle,children:tx.status||'-'})]},tx._id);})})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"quick-actions\",style:{marginTop:'2rem'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Quick Actions\"}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'1rem'},children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/sales/new'),style:buttonStyle,children:\"Add New Sale\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/sourcing/new'),style:buttonStyle,children:\"Add New Sourcing\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/reports'),style:buttonStyle,children:\"View Reports\"})]})]})]});};const statCardStyle={backgroundColor:'#f9f9f9',padding:'1rem 1.5rem',borderRadius:'8px',textAlign:'center',flex:'1',boxShadow:'0 2px 6px rgba(0,0,0,0.1)'};const thStyle={textAlign:'left',borderBottom:'2px solid #ccc',padding:'0.5rem 1rem'};const tdStyle={padding:'0.5rem 1rem'};const buttonStyle={padding:'0.7rem 1.2rem',backgroundColor:'#007bff',color:'#fff',border:'none',borderRadius:'5px',cursor:'pointer',fontWeight:'bold'};export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","useSelector","useDispatch","fetchUserTransactions","useNavigate","jsxs","_jsxs","jsx","_jsx","Dashboard","dispatch","navigate","user","state","auth","transactions","setTransactions","loading","setLoading","loadTransactions","data","id","error","console","totalTransactions","length","totalSourcing","filter","t","type","totalSales","className","children","name","style","display","gap","marginBottom","statCardStyle","width","borderCollapse","thStyle","slice","map","tx","_tx$quantity","borderBottom","tdStyle","Date","timestamp","toLocaleString","quantity","price","status","_id","marginTop","onClick","buttonStyle","backgroundColor","padding","borderRadius","textAlign","flex","boxShadow","color","border","cursor","fontWeight"],"sources":["/workspaces/PKBS-Manager/PKBS webapp version/frontend/src/pages/Dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { fetchUserTransactions } from '../services/api';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Dashboard = () => {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  const user = useSelector(state => state.auth.user);\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const loadTransactions = async () => {\r\n      try {\r\n        const data = await dispatch(fetchUserTransactions(user.id));\r\n        setTransactions(data);\r\n      } catch (error) {\r\n        console.error('Failed to fetch transactions:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (user?.id) loadTransactions();\r\n  }, [dispatch, user]);\r\n\r\n  // Calculate simple stats\r\n  const totalTransactions = transactions.length;\r\n  const totalSourcing = transactions.filter(t => t.type === 'sourcing').length;\r\n  const totalSales = transactions.filter(t => t.type === 'sale').length;\r\n\r\n  return (\r\n    <div className=\"dashboard-page\">\r\n      <h1>Welcome back, {user?.name || 'User'}!</h1>\r\n\r\n      <section className=\"dashboard-stats\" style={{ display: 'flex', gap: '2rem', marginBottom: '2rem' }}>\r\n        <div className=\"stat-card\" style={statCardStyle}>\r\n          <h3>Total Transactions</h3>\r\n          <p>{loading ? 'Loading...' : totalTransactions}</p>\r\n        </div>\r\n        <div className=\"stat-card\" style={statCardStyle}>\r\n          <h3>Sourcing Transactions</h3>\r\n          <p>{loading ? 'Loading...' : totalSourcing}</p>\r\n        </div>\r\n        <div className=\"stat-card\" style={statCardStyle}>\r\n          <h3>Sales Transactions</h3>\r\n          <p>{loading ? 'Loading...' : totalSales}</p>\r\n        </div>\r\n      </section>\r\n\r\n      <section className=\"recent-transactions\">\r\n        <h2>Recent Transactions</h2>\r\n        {loading ? (\r\n          <p>Loading transactions...</p>\r\n        ) : transactions.length === 0 ? (\r\n          <p>No transactions found.</p>\r\n        ) : (\r\n          <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n            <thead>\r\n              <tr>\r\n                <th style={thStyle}>Date</th>\r\n                <th style={thStyle}>Type</th>\r\n                <th style={thStyle}>Quantity (kg)</th>\r\n                <th style={thStyle}>Price (â‚¦)</th>\r\n                <th style={thStyle}>Status</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {transactions.slice(0, 5).map(tx => (\r\n                <tr key={tx._id} style={{ borderBottom: '1px solid #ddd' }}>\r\n                  <td style={tdStyle}>{new Date(tx.timestamp).toLocaleString()}</td>\r\n                  <td style={tdStyle}>{tx.type}</td>\r\n                  <td style={tdStyle}>{tx.quantity ?? '-'}</td>\r\n                  <td style={tdStyle}>{tx.price ? tx.price.toLocaleString() : '-'}</td>\r\n                  <td style={tdStyle}>{tx.status || '-'}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        )}\r\n      </section>\r\n\r\n      <section className=\"quick-actions\" style={{ marginTop: '2rem' }}>\r\n        <h2>Quick Actions</h2>\r\n        <div style={{ display: 'flex', gap: '1rem' }}>\r\n          <button onClick={() => navigate('/sales/new')} style={buttonStyle}>Add New Sale</button>\r\n          <button onClick={() => navigate('/sourcing/new')} style={buttonStyle}>Add New Sourcing</button>\r\n          <button onClick={() => navigate('/reports')} style={buttonStyle}>View Reports</button>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst statCardStyle = {\r\n  backgroundColor: '#f9f9f9',\r\n  padding: '1rem 1.5rem',\r\n  borderRadius: '8px',\r\n  textAlign: 'center',\r\n  flex: '1',\r\n  boxShadow: '0 2px 6px rgba(0,0,0,0.1)',\r\n};\r\n\r\nconst thStyle = {\r\n  textAlign: 'left',\r\n  borderBottom: '2px solid #ccc',\r\n  padding: '0.5rem 1rem',\r\n};\r\n\r\nconst tdStyle = {\r\n  padding: '0.5rem 1rem',\r\n};\r\n\r\nconst buttonStyle = {\r\n  padding: '0.7rem 1.2rem',\r\n  backgroundColor: '#007bff',\r\n  color: '#fff',\r\n  border: 'none',\r\n  borderRadius: '5px',\r\n  cursor: 'pointer',\r\n  fontWeight: 'bold',\r\n};\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}